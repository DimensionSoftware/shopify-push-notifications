import{stringify as e,parse as t}from"query-string";import r from"node-fetch";"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o=function(o,s,i,a){try{return Promise.resolve(function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(function(){var c,m,u=(c=n.md.sha256.create(),m=n.random.getBytesSync(8),c.update(m),c.digest().toHex()),y=function(e,r,o){var s=t(o),i=Object.assign({},s),a=Object.keys(i).sort().reduce(function(e,t){return e.push(t+"="+i[t]),e},[]).join(""),c=n.hmac.create();return console.log("sorted params: ",a),c.start("sha256",e),c.update(a),c.digest().toHex()}(s,0,"?path_prefix=/apps/dimensionauth&seed="+u+"&shop="+o);return Promise.resolve(r("https://"+o+"/apps/dimensionauth/api"+i+"?"+e({seed:u,sig:y}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).then(function(e){return Promise.resolve(e.json())})},function(e){return{success:!1,error:e}}))}catch(e){return Promise.reject(e)}},n=require("node-forge");function s(e){return e.indexOf("myshopify.com")>=0?e:-1===e.indexOf(".")?e+".myshopify.com":e}export{o as request,s as shopifyDomainFrom};
//# sourceMappingURL=helpers.ts.module.ts.map
