import{stringify as e,parse as t}from"query-string";import r from"node-fetch";"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o=function(o,i,s,a){try{return Promise.resolve(function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(function(){var c,u,m=(c=n.md.sha256.create(),u=n.random.getBytesSync(8),c.update(u),c.digest().toHex()),y=function(e,r,o){var i=t(o),s=Object.assign({},i),a=Object.keys(s).sort().reduce(function(e,t){return e.push(t+"="+s[t]),e},[]).join(""),c=n.hmac.create();return c.start("sha256",e),c.update(a),c.digest().toHex()}(i,0,"?path_prefix=/apps/dimensionauth&seed="+m+"&shop="+o);return Promise.resolve(r("https://"+o+"/apps/dimensionauth/api"+s+"?"+e({seed:m,sig:y}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).then(function(e){return Promise.resolve(e.json())})},function(e){return{success:!1,error:e}}))}catch(e){return Promise.reject(e)}},n=require("node-forge");function i(e){return e.indexOf("myshopify.com")>=0?e:-1===e.indexOf(".")?e+".myshopify.com":e}export{o as request,i as shopifyDomainFrom};
//# sourceMappingURL=helpers.ts.module.ts.map
